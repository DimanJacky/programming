<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    const people = [
        {
            name: 'Alex',
            city: 'Moscow',
        },
        {
            name: 'Alex2',
            city: 'Moscow',
        },
        {
            name: 'Ivan',
            city: 'Moscow',
        },
        {
            name: 'Joe',
            city: 'New York'
        },
        {
            name: 'Johan',
            city: 'Berlin'
        },
    ];

    const func = (array) => {
        return array.reduce((acc, {city, name}) => {
            if (!acc[city]) { // если в объекте нет такого свойства, то добавляем его
                acc[city] = name;
            } else if (!Array.isArray(acc[city])) { // если свойство строка, создаем массив и добавляем которое было и текущее свойство
                acc[city] = [acc[city], name];
            } else { // если свойство массив, то добавляем еще свойство в массив
                acc[city].push(name);
            }
            return acc;
        }, {});
    };

    console.log(func(people));
</script>
</body>
</html>